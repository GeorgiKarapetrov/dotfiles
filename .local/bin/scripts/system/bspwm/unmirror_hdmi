#!/bin/bash

set -x

#unmirror screen
if [[ "$(xrandr --query | grep "HDMI1 disconnected" | wc -l)" = 1 ]]; then
	xrandr --output HDMI1 --auto
	xrandr --addmode HDMI1 1920x1080
fi
if [[ "$(xrandr --query | grep " connected" | wc -l)" = 2 ]]; then
	c=1
	for m in $(xrandr --query | grep " connected" | cut -d" " -f1); do
		eval "m$c=$m"
		c=$((c + 1))
	done
	xrandr --output $m1 --primary --mode 1920x1080 --pos 1920x0 --rotate normal --output $m2 --mode 1920x1080 --pos 0x0 --rotate normal
	bspc monitor $m1 -d 1 2 3 4 5
	bspc monitor $m2 -d 6 7 8 9 10
	bspc monitor $m1 -s $m2
	exit 0
fi
xrandr --output eDP1 --primary --mode 1920x1080 --pos 1920x0 --rotate normal --output HDMI1 --mode 1920x1080 --pos 0x0 --rotate normal --output DP1 --auto --output DP2  --auto --output VIRTUAL1 --auto
$HOME/.config/polybar/launch.sh &
